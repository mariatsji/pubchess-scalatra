<!DOCTYPE html>
<html>
<head>
    <script src="scripts/pubchess.js"></script>
    <script src="scripts/stats.js"></script>
</head>
<body>
<h1>Pubchess</h1>

<div id="player"></div>

<script>
    showPlayerDetails(getRequestParameter('id'));
</script>

<svg xmlns="http://www.w3.org/2000/svg" width="20cm" height="9cm" version="1.1" id="graf"></svg>

<script>
    var elos = getStats(getRequestParameter('id'));
    var minelo = stats.minElo(elos);
    var maxelo = stats.maxElo(elos);
    var mindate = stats.minDate(elos);
    var maxdate = stats.maxDate(elos);
    var graf = document.getElementById('graf');
    var xoffset = 40;
    var yoffset = 10;
    var height = 300;
    var width = 600;
    var yaxis = stats.line(xoffset, yoffset, xoffset, height);
    var xaxis = stats.line(xoffset, height, width, height);
    var label1 = stats.text(minelo.elo.toFixed(0), xoffset - 40, height - 10);
    var label2 = stats.text(maxelo.elo.toFixed(0), xoffset - 40, yoffset + 5);
    var label3 = stats.text(stats.striptime(mindate.date), xoffset, height + 20);
    var label4 = stats.text(stats.striptime(maxdate.date), width - 50, height + 20);
    graf.appendChild(xaxis);
    graf.appendChild(yaxis);
    graf.appendChild(label1);
    graf.appendChild(label2);
    graf.appendChild(label3);
    graf.appendChild(label4);
    if(elos.length > 0) {
        var last = new Array();
        //x
        last[0] = elos[0].elo.toFixed(0);
        //y
        last[1] = yoffset;
        for (var i = 0; i < elos.length; i++) {
            var next = stats.nextDestination(height, width, elos, i, minelo, maxelo);
            graf.appendChild(stats.line(last[0], last[1], next[0], next[1]));
            last[0] = next[0];
            last[1] = next[1];
        }
    }
</script>

<p>
   <br /><a href="/">Home</a>
   <br /><a href="tournaments.html">Tournaments</a>
</p>

</body>
</html>
